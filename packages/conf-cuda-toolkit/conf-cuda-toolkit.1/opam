opam-version: "2.0"
maintainer: "Lukasz Stafiniak <lukstafi@gmail.com>"
authors: [ "NVIDIA" ]
homepage: "https://docs.nvidia.com/cuda/"
license: "CUDA Toolkit End User License Agreement"
available: [
  (os = "linux")
]
build: [
  ["sh" "-exc" "echo \"#include  \\\"cuda.h\\\"\" > test.c"]
  ["sh" "-exc" "cc -c $CFLAGS -I/usr/local/cuda/include test.c"]
]
depends: [ "conf-gcc" ]
depexts: [
  # See: https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#meta-packages
  # The meta-package cuda-toolkit does not include drivers,
  # therefore it is safe to install both on regular distributions and on WSL.
  ["cuda-toolkit"]
]
post-messages: [
  "The installed package cuda-toolkit does not include CUDA drivers. If not on WSL, consider installing cuda-drivers."
]
synopsis: "Virtual package relying on a cuda-toolkit system installation"
description:
  "This package can only install if cuda-toolkit is installed on the system. cuda-toolkit does not include drivers."
bug-reports: "https://github.com/ocaml/opam-repository/issues"
flags: conf
